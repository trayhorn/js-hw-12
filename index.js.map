{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.js-form');\nconst gallery = document.querySelector('.js-gallery');\nconst loadButton = document.querySelector('.js-load-button');\n\nlet page = 1;\nlet searchQuery;\n\nconst lightbox = new SimpleLightbox('.item-link', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', handleSearch);\nloadButton.addEventListener('click', handleLoadMore)\n\nfunction handleSearch(e) {\n  e.preventDefault();\n\n  gallery.innerHTML = '';\n\n  const { query } = e.currentTarget.elements;\n  searchQuery = query.value;\n\n  if (searchQuery === '') {\n    iziToast.error({\n      message: 'Please enter a value!',\n    });\n    return;\n  };\n\n  fetchImages(searchQuery).then(({ data: { hits } }) => {\n    gallery.insertAdjacentHTML('beforeend', createMarkUp(hits));\n    lightbox.refresh();\n    loadButton.classList.remove('is-hidden');\n    page++;\n  })}\n\nfunction fetchImages(searchQuery) {\n  return axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '29734383-6ec437d7a0c5df52cef54a0f9',\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 16,\n    },\n  });\n}\n\nfunction createMarkUp(arr) {\n  return arr.map(\n      el =>\n        `<li class=\"gallery-item\">\n            <a class=\"item-link\" href=\"${el.largeImageURL}\">\n              <img\n                class=\"item-image\"\n                src=\"${el.webformatURL}\"\n                alt=\"${el.tags}\"\n              >\n            </a>\n            <div class=\"item-stats_container\">\n              <p class=\"item-stats\"><span>Likes</span>${el.likes}</p>\n              <p class=\"item-stats\"><span>Views</span>${el.views}</p>\n              <p class=\"item-stats\"><span>Comments</span>${el.comments}</p>\n              <p class=\"item-stats\"><span>Downloads</span>${el.downloads}</p>\n            </div>\n          </li>`\n    )\n    .join('');\n}\n\nfunction handleLoadMore() {\n  fetchImages(searchQuery).then(({ data: { hits } }) => {\n    gallery.insertAdjacentHTML('beforeend', createMarkUp(hits));\n    lightbox.refresh();\n  })\n\n  page++;\n}\n\n"],"names":["form","gallery","loadButton","page","searchQuery","lightbox","SimpleLightbox","handleSearch","handleLoadMore","e","query","iziToast","fetchImages","hits","createMarkUp","axios","arr","el"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAa,SAAS,cAAc,iBAAiB,EAE3D,IAAIC,EAAO,EACPC,EAEJ,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EAEDN,EAAK,iBAAiB,SAAUO,CAAY,EAC5CL,EAAW,iBAAiB,QAASM,CAAc,EAEnD,SAASD,EAAaE,EAAG,CACvBA,EAAE,eAAc,EAEhBR,EAAQ,UAAY,GAEpB,KAAM,CAAE,MAAAS,CAAO,EAAGD,EAAE,cAAc,SAGlC,GAFAL,EAAcM,EAAM,MAEhBN,IAAgB,GAAI,CACtBO,EAAS,MAAM,CACb,QAAS,uBACf,CAAK,EACD,MAEJ,CACEC,EAAYR,CAAW,EAAE,KAAK,CAAC,CAAE,KAAM,CAAE,KAAAS,CAAI,KAAS,CACpDZ,EAAQ,mBAAmB,YAAaa,EAAaD,CAAI,CAAC,EAC1DR,EAAS,QAAO,EAChBH,EAAW,UAAU,OAAO,WAAW,EACvCC,GACJ,CAAG,CAAC,CAEJ,SAASS,EAAYR,EAAa,CAChC,OAAOW,EAAM,IAAI,2BAA4B,CAC3C,OAAQ,CACN,IAAK,qCACL,EAAGX,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAD,EACA,SAAU,EACX,CACL,CAAG,CACH,CAEA,SAASW,EAAaE,EAAK,CACzB,OAAOA,EAAI,IACPC,GACE;AAAA,yCACiCA,EAAG,aAAa;AAAA;AAAA;AAAA,uBAGlCA,EAAG,YAAY;AAAA,uBACfA,EAAG,IAAI;AAAA;AAAA;AAAA;AAAA,wDAI0BA,EAAG,KAAK;AAAA,wDACRA,EAAG,KAAK;AAAA,2DACLA,EAAG,QAAQ;AAAA,4DACVA,EAAG,SAAS;AAAA;AAAA,gBAGnE,EACA,KAAK,EAAE,CACZ,CAEA,SAAST,GAAiB,CACxBI,EAAYR,CAAW,EAAE,KAAK,CAAC,CAAE,KAAM,CAAE,KAAAS,CAAI,KAAS,CACpDZ,EAAQ,mBAAmB,YAAaa,EAAaD,CAAI,CAAC,EAC1DR,EAAS,QAAO,CACpB,CAAG,EAEDF,GACF"}