{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/utils/notifications.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function fetchImages(searchQuery, page) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '29734383-6ec437d7a0c5df52cef54a0f9',\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 16,\n    },\n  });\n\n  return response;\n}\n","export default function createMarkUp(arr) {\n  return arr\n    .map(\n      el =>\n        `<li class=\"gallery-item\">\n            <a class=\"item-link\" href=\"${el.largeImageURL}\">\n              <img\n                class=\"item-image\"\n                src=\"${el.webformatURL}\"\n                alt=\"${el.tags}\"\n              >\n            </a>\n            <div class=\"item-stats_container\">\n              <p class=\"item-stats\"><span>Likes</span>${el.likes}</p>\n              <p class=\"item-stats\"><span>Views</span>${el.views}</p>\n              <p class=\"item-stats\"><span>Comments</span>${el.comments}</p>\n              <p class=\"item-stats\"><span>Downloads</span>${el.downloads}</p>\n            </div>\n          </li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\niziToast.settings({\n  position: 'topRight',\n  timeout: 5000,\n  closeOnEscape: true,\n});\n\nexport function errorFetch() {\n  return iziToast.error({\n    title: 'Error',\n    message: 'Please try again',\n  });\n}\n\nexport function errorQuery() {\n  return iziToast.error({\n    position: 'topRight',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n\nexport function errorEmptyQuery() {\n  return iziToast.error({\n    message: 'Please enter a value!',\n  });\n}\n\nexport function warning() {\n  return iziToast.warning({\n    title: 'Warning',\n    message: 'We are out of images. Please change the query',\n  });\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport fetchImages from './js/pixabay-api';\nimport createMarkUp from './js/render-functions';\nimport * as notification from './utils/notifications';\nimport throttle from 'lodash.throttle';\n\nconst form = document.querySelector('.js-form');\nconst gallery = document.querySelector('.js-gallery');\nconst loadButton = document.querySelector('.js-load-button');\nconst scrollButton = document.querySelector('.scroll-up-button');\n\nlet page;\nlet searchQuery;\n\nconsole.log(throttle);\n\n\nconst lightbox = new SimpleLightbox('.item-link', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', handleSearch);\nloadButton.addEventListener('click', handleLoadMore);\n\nscrollButton.addEventListener('click', () => {\n  window.scroll({\n    top: 0,\n    behavior: 'smooth'\n  })\n})\n\nwindow.addEventListener(\n  'scroll',\n  throttle(() => {\n    console.log('scrolled');\n    if (window.scrollY > 2400) {\n      scrollButton.classList.remove('scroll-hidden');\n    } else {\n      scrollButton.classList.add('scroll-hidden');\n    }\n  }, 300)\n);\n\n\nfunction handleSearch(e) {\n  e.preventDefault();\n  if (!loadButton.classList.contains('is-hidden')) {\n    loadButton.classList.add('is-hidden');\n  }\n\n  page = 1;\n\n  gallery.innerHTML = '';\n  searchQuery = e.currentTarget.elements.query.value;\n\n  if (searchQuery === '') {\n    notification.errorEmptyQuery();\n    return;\n  }\n\n  fetchImages(searchQuery, page)\n    .then(({ data: { hits } }) => {\n      if (hits.length === 0) {\n        notification.errorQuery();\n        return;\n      }\n      gallery.insertAdjacentHTML('beforeend', createMarkUp(hits));\n      lightbox.refresh();\n\n      loadButton.classList.remove('is-hidden');\n      page++;\n    })\n    .catch(() => notification.errorFetch());\n}\n\nfunction handleLoadMore() {\n  if (page <= 31) {\n    fetchImages(searchQuery, page).then(({ data: { hits } }) => {\n      gallery.insertAdjacentHTML('beforeend', createMarkUp(hits));\n      lightbox.refresh();\n\n      page++;\n    });\n  } else {\n    fetchImages(searchQuery, page).then(({ data: { hits } }) => {\n      gallery.insertAdjacentHTML('beforeend', createMarkUp(hits));\n      lightbox.refresh();\n    });\n\n    loadButton.classList.add('is-hidden');\n    notification.warning();\n  }\n}\n"],"names":["fetchImages","searchQuery","page","axios","createMarkUp","arr","el","iziToast","errorFetch","errorQuery","errorEmptyQuery","warning","form","gallery","loadButton","scrollButton","throttle","lightbox","SimpleLightbox","handleSearch","handleLoadMore","e","notification.errorEmptyQuery","hits","notification.errorQuery","notification.errorFetch","notification.warning"],"mappings":"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"}